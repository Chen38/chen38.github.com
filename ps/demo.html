<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Demo-Ps</title>
	<link rel="stylesheet" href="css/style.css">
	<!-- filter -->
	<script type="text/javascript" src="js/caman.full.min.js"></script>
	<!-- control img -->
	<script type="text/javascript" src="js/fabric.min.js"></script>
</head>
<body>
	
	<canvas id="myCanvas" width="800" height="400" data-caman-id="1" data-caman-hidpi="../img/me_bckg.jpg"></canvas>
	
	<div id="btns">
		<span data-effect="Lomo" id="lomo">Lomo</span>
		<span data-effect="Warm" id="warm">Warm</span>
	</div>
	
	<script>
		
		window.onload = function() {
			var name = "#myCanvas";
			var btns = get("btns").getElementsByTagName('span'),
				len = btns.length;
			for (var i = 0; i < len; i++) {
				btns[i].save = i;
				btns[i].onclick = function() {
					for (var j = 0; j < len; j++) {
						btns[j].className = "";
					}
					btns[this.save].className = "selected";
					var eff = btns[this.save].dataset.effect;
					switch (eff) {
						case "Lomo":
							Lomo(name);
							break;
						case "Warm":
							Warm(name);
							break;
						default:
							break;
					}
				}
			}
			function Lomo(name) {
				Caman(name, function() {
					this.newLayer(function() {
						this.fillColor("#603811");
						this.opacity(60);
					});
					this.render();
				});
			}
			function Warm(name) {
				Caman(name, function() {
					this.brightness(30);
					this.exposure(5);
					this.sepia(45);
					this.render();
				});
			}
			function get(id) {
				return document.getElementById(id);
			}
		}
	</script>
	
</body>
</html>